\documentclass[12pt,a4paper]{book}
\usepackage[margin=2cm]{geometry}
\usepackage{amsmath,amsthm,amsfonts}
\usepackage{algorithm,algpseudocode}
\usepackage{answers}
\usepackage{tikz}
\usepackage{epstopdf}
\usepackage{hyperref}
\usepackage[euler-digits]{eulervm}
\usepackage[capitalize]{cleveref}

\title{Numerical Methods for \\
Partial Differential Equations}
\author{William McLean}
\date{\today}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{example}[theorem]{Example}
\newtheorem{definition}[theorem]{Definition}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcounter{exno}[chapter]
\renewcommand{\theexno}{\thechapter.\arabic{exno}}
\newcommand{\exercise}{\refstepcounter{exno}\paragraph{\theexno.}}
\Newassociation{ans}{answer}{ansfile}
\newenvironment{Exercises}{\section{Exercises}%
\Writetofile{ansfile}{\protect\section*{Chapter \thechapter}}}{\relax}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\brak}[1]{^{\langle#1\rangle}}
\newcommand{\swap}{\leftrightarrow}
\newcommand{\free}{^{\mathrm{free}}}
\newcommand{\fix}{^{\mathrm{fix}}}
\newcommand{\iprod}[1]{\langle#1\rangle}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\includeonly{chap4}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
\maketitle
\tableofcontents
\Opensolutionfile{ansfile}
\include{chap1}
\include{chap2}
\include{chap3}
\include{chap4}
\include{chap5}
\include{chap6}
\appendix
\include{appendixA}
\Closesolutionfile{ansfile}
\chapter{Answers to selected exercises}
\Readsolutionfile{ansfile}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\end{document}
